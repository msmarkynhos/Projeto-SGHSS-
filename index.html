<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VidaPlus - Sistema de Gest√£o Hospitalar</title>
    <style>
        :root {
            --green: #07c287;
            --green-light: #e6fff4;
            --muted: #6b7280;
            --bg: #f4f7f9;
            --white: #ffffff;
            --red-danger: #b30000;
            --blue: #0284c7;
            --blue-light: #e0f2fe;
            --purple: #8b5cf6;
            --purple-light: #eee6ff;
            --text-dark: #0f172a;
            --yellow: #f59e0b;
            --yellow-light: #fef3c7;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); color: var(--text-dark); }
        
        .dashboard-layout { display: flex; min-height: 100vh; }
        .sidebar { width: 280px; background: var(--white); border-right: 1px solid #e0e0e0; padding: 20px 0; box-shadow: 2px 0 8px rgba(0,0,0,0.08); display: flex; flex-direction: column; position: fixed; height: 100%; top: 0; left: 0; z-index: 10; overflow-y: auto; }
        .main-content { margin-left: 280px; flex-grow: 1; padding: 30px; }
        .sidebar-header { padding: 0 20px 20px 20px; border-bottom: 2px solid #eee; margin-bottom: 20px; }
        .sidebar-user { font-weight: 700; color: var(--text-dark); margin-bottom: 5px; font-size: 0.95rem; }
        .sidebar-menu { display: flex; flex-direction: column; }
        .sidebar-menu a { display: flex; align-items: center; padding: 12px 20px; text-decoration: none; color: #333; font-weight: 500; transition: all 0.3s; border-left: 5px solid transparent; cursor: pointer; }
        .sidebar-menu a:hover { background: #f0f3f5; transform: translateX(5px); }
        .sidebar-menu a.active { background: var(--green-light); color: var(--green); font-weight: 700; border-left: 5px solid var(--green); }
        
        .page { display: none; max-width: 1300px; margin: auto; padding: 1rem; }
        .active { display: block; }
        .card { background: var(--white); padding: 20px; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.06); margin-bottom: 20px; border: 1px solid #f0f0f0; }
        label { font-weight: 700; margin-top: 1rem; display: block; color: var(--text-dark); }
        input, select, textarea { padding: 10px; border: 1px solid #dcdcdc; border-radius: 8px; width: 100%; margin-top: 0.5rem; margin-bottom: 1rem; background: #fafafa; font-family: inherit; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: var(--green); box-shadow: 0 0 0 3px rgba(7, 194, 135, 0.1); }
        
        .btnPrimary { background: var(--green); color: white; padding: 10px 20px; border-radius: 8px; font-weight: 600; text-decoration: none; cursor: pointer; border: none; display: inline-block; transition: all 0.3s; }
        .btnPrimary:hover { background: #06a76d; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(7, 194, 135, 0.3); }
        
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px; }
        .stat-card { padding: 20px; border-radius: 12px; background: var(--white); box-shadow: 0 2px 8px rgba(0,0,0,0.06); border-left: 5px solid var(--green); }
        .stat-card h3 { color: var(--muted); font-size: 0.85rem; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 0.5px; }
        .stat-card p { font-size: 2.2rem; font-weight: 800; color: var(--green); }
        
        .login-container { display: flex; max-width: 1100px; margin: 40px auto; border-radius: 16px; box-shadow: 0 15px 40px rgba(0,0,0,0.12); overflow: hidden; min-height: 600px; }
        .login-sidebar { flex: 1.2; background: linear-gradient(135deg, var(--green-light) 0%, #d4f8f0 100%); padding: 50px 40px; display: flex; flex-direction: column; justify-content: space-between; }
        .login-main { flex: 1; background: var(--white); padding: 50px 40px; overflow-y: auto; }
        
        .profile-card { display: flex; align-items: center; padding: 15px; border: 2px solid #e0e0e0; border-radius: 10px; margin-bottom: 15px; cursor: pointer; transition: all 0.3s; }
        .profile-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.08); transform: translateY(-2px); }
        .profile-card.selected { border-color: var(--green); background: var(--green-light); }
        .profile-card h4 { margin: 0; font-weight: 700; font-size: 1rem; }
        .profile-card p { margin: 0; font-size: 0.85rem; color: var(--muted); margin-top: 3px; }
        
        .btn-login-final { background: var(--green); color: white; padding: 12px 20px; border-radius: 8px; font-weight: 700; border: none; cursor: pointer; width: 100%; margin-top: 25px; font-size: 1rem; transition: all 0.3s; }
        .btn-login-final:hover { background: #06a76d; }
        
        .consulta-card { background: var(--white); padding: 18px; border-radius: 10px; margin-bottom: 15px; border-left: 5px solid var(--green); box-shadow: 0 2px 8px rgba(0,0,0,0.05); transition: all 0.3s; }
        .consulta-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .consulta-card h4 { margin: 0 0 10px 0; color: var(--text-dark); font-weight: 700; }
        .consulta-info { font-size: 0.9rem; color: var(--muted); margin: 6px 0; }
        .badge { display: inline-block; padding: 4px 10px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; margin-top: 8px; }
        .badge-video { background: var(--blue-light); color: var(--blue); }
        .badge-presencial { background: var(--yellow-light); color: var(--yellow); }
        .badge-success { background: #d1fae5; color: #059669; }
        .badge-warning { background: #fed7aa; color: #d97706; }
        
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); overflow-y: auto; }
        .modal-content { background-color: var(--white); margin: 5% auto; padding: 40px; border-radius: 12px; width: 90%; max-width: 550px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); }
        .close { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; transition: color 0.2s; }
        .close:hover { color: black; }
        .modal.show { display: block; }
        
        .table-responsive { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 14px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: var(--green-light); font-weight: 700; color: var(--green); text-transform: uppercase; font-size: 0.85rem; }
        tr:hover { background: #fafafa; }
        
        .paciente-card { background: var(--white); padding: 20px; border-radius: 10px; margin-bottom: 15px; border: 2px solid #e0e0e0; cursor: pointer; transition: all 0.3s; }
        .paciente-card:hover { border-color: var(--green); box-shadow: 0 4px 12px rgba(7, 194, 135, 0.2); transform: translateY(-2px); }
        .paciente-card h4 { margin: 0 0 8px 0; color: var(--text-dark); font-weight: 700; }
        .paciente-card p { margin: 4px 0; font-size: 0.9rem; color: var(--muted); }
        
        .admin-metric { background: linear-gradient(135deg, var(--blue-light) 0%, #e0f2fe 100%); padding: 20px; border-radius: 10px; margin-bottom: 15px; }
        .admin-metric h4 { margin: 0; color: var(--blue); font-weight: 700; }
        .admin-metric p { margin: 8px 0 0 0; font-size: 2rem; font-weight: 800; color: var(--blue); }
        
        .info-box { background: var(--green-light); padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid var(--green); }
        .info-box h4 { margin: 0 0 8px 0; color: var(--green); font-weight: 700; }
        .info-box p { margin: 0; color: var(--text-dark); font-size: 0.95rem; }
        
        .dica-card { background: var(--yellow-light); padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid var(--yellow); }
        .dica-card h5 { margin: 0 0 5px 0; color: var(--yellow); font-weight: 700; }
        .dica-card p { margin: 0; color: var(--text-dark); font-size: 0.9rem; }
        
        .prescricao-card { background: var(--white); padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 5px solid var(--purple); box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .prescricao-card h5 { margin: 0 0 8px 0; color: var(--text-dark); font-weight: 700; }
        .prescricao-card p { margin: 4px 0; font-size: 0.9rem; color: var(--muted); }
        
        .leito-card { background: var(--white); padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 5px solid var(--blue); box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .leito-card h5 { margin: 0 0 8px 0; color: var(--text-dark); font-weight: 700; }
        .leito-card p { margin: 4px 0; font-size: 0.9rem; color: var(--muted); }
        
        @media (max-width: 768px) {
            .sidebar { width: 100%; height: auto; position: relative; }
            .main-content { margin-left: 0; padding: 20px; }
            .login-container { flex-direction: column; margin: 20px; }
            .stats-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<!-- Login Screen -->
<div id="login-screen-wrapper" style="padding: 20px;">
    <div id="fakeData" style="display: none;">{"pacientes": [{"id": 1, "nome": "Ana Silva", "email": "ana@paciente.com", "cpf": "111.111.111-11", "data_nasc": "1980-05-12", "historico_medico": "Hipertens√£o arterial desde 2015. Hist√≥rico familiar de diabetes.", "medicamentos_uso": ["Enalapril 10mg (1x ao dia)", "AAS 100mg (1x ao dia)"], "doencas_cronicas": ["Hipertens√£o"], "sinais_vitais": {"peso": 75.5, "altura": 1.65, "pressao": "130/85 mmHg", "frequencia_cardiaca": "72 bpm"}, "sintomas_atuais": "Dor de cabe√ßa leve e ocasional."}, {"id": 2, "nome": "Bruno Costa", "email": "bruno@paciente.com", "cpf": "222.222.222-22", "data_nasc": "1990-03-15", "historico_medico": "Asma br√¥nquica diagnosticada na inf√¢ncia. Sem interna√ß√µes recentes.", "medicamentos_uso": ["Salbutamol (SOS)"], "doencas_cronicas": ["Asma"], "sinais_vitais": {"peso": 88.0, "altura": 1.80, "pressao": "120/80 mmHg", "frequencia_cardiaca": "65 bpm"}, "sintomas_atuais": "Tosse seca persistente h√° 3 dias."}, {"id": 3, "nome": "Carlos Oliveira", "email": "carlos@paciente.com", "cpf": "333.333.333-33", "data_nasc": "1985-07-20", "historico_medico": "Sem hist√≥rico m√©dico relevante. Alergia a frutos do mar.", "medicamentos_uso": ["Nenhum"], "doencas_cronicas": ["Nenhuma"], "sinais_vitais": {"peso": 95.2, "altura": 1.75, "pressao": "125/75 mmHg", "frequencia_cardiaca": "80 bpm"}, "sintomas_atuais": "Dor no joelho ap√≥s exerc√≠cio f√≠sico."}, {"id": 4, "nome": "Diana Ferreira", "email": "diana@paciente.com", "cpf": "444.444.444-44", "data_nasc": "1992-11-08", "historico_medico": "Enxaqueca cr√¥nica. Em acompanhamento neurol√≥gico.", "medicamentos_uso": ["Sumatriptano (SOS)"], "doencas_cronicas": ["Enxaqueca Cr√¥nica"], "sinais_vitais": {"peso": 60.1, "altura": 1.70, "pressao": "110/70 mmHg", "frequencia_cardiaca": "68 bpm"}, "sintomas_atuais": "Fadiga e dificuldade de concentra√ß√£o."}, {"id": 5, "nome": "Eduardo Santos", "email": "eduardo@paciente.com", "cpf": "555.555.555-55", "data_nasc": "1988-01-30", "historico_medico": "Diabetes Tipo 2 diagnosticada em 2020. Controlada com dieta e medica√ß√£o.", "medicamentos_uso": ["Metformina 500mg (2x ao dia)"], "doencas_cronicas": ["Diabetes Tipo 2"], "sinais_vitais": {"peso": 105.0, "altura": 1.85, "pressao": "135/90 mmHg", "frequencia_cardiaca": "78 bpm"}, "sintomas_atuais": "Aumento da sede e mic√ß√£o frequente."}], "medicos": [{"id": 101, "nome": "Dr. Carlos Mendes", "especialidade": "Cardiologia", "email": "carlos@medico.com", "crm": "123456-SP"}, {"id": 102, "nome": "Dra. Diana Souza", "especialidade": "Pediatria", "email": "diana@medico.com", "crm": "654321-SP"}], "consultas": [{"id": 1001, "paciente_id": 1, "medico_id": 101, "data": "2025-12-05", "hora": "10:00", "status": "Agendada", "tipo": "Cardiologia", "modalidade": "video"}, {"id": 1002, "paciente_id": 2, "medico_id": 102, "data": "2025-12-06", "hora": "14:30", "status": "Agendada", "tipo": "Pediatria", "modalidade": "presencial"}, {"id": 1003, "paciente_id": 1, "medico_id": 101, "data": "2025-11-15", "hora": "09:00", "status": "Concluida", "tipo": "Cardiologia", "modalidade": "video"}, {"id": 1004, "paciente_id": 3, "medico_id": 101, "data": "2025-12-10", "hora": "11:00", "status": "Agendada", "tipo": "Cardiologia", "modalidade": "presencial"}, {"id": 1005, "paciente_id": 4, "medico_id": 102, "data": "2025-12-12", "hora": "15:00", "status": "Agendada", "tipo": "Pediatria", "modalidade": "video"}], "prescricoes": [{"id": 2001, "paciente_id": 1, "medico_id": 101, "medicamento": "Enalapril 10mg", "dosagem": "1 comprimido ao dia", "duracao": "30 dias", "data": "2025-11-20"}, {"id": 2002, "paciente_id": 2, "medico_id": 102, "medicamento": "Salbutamol", "dosagem": "2 inala√ß√µes conforme necess√°rio", "duracao": "Cont√≠nuo", "data": "2025-11-18"}], "leitos": [{"id": 3001, "numero": "101", "andar": "1", "status": "Ocupado", "paciente": "Jo√£o Silva", "data_internacao": "2025-11-20"}, {"id": 3002, "numero": "102", "andar": "1", "status": "Dispon√≠vel", "paciente": null, "data_internacao": null}, {"id": 3003, "numero": "201", "andar": "2", "status": "Ocupado", "paciente": "Maria Santos", "data_internacao": "2025-11-22"}, {"id": 3004, "numero": "202", "andar": "2", "status": "Dispon√≠vel", "paciente": null, "data_internacao": null}], "admin_metrics": {"servidores_ativos": 12, "tickets_abertos": 5, "contratacoes_mes": 3, "uptime_medio": "99.98%", "licencas_software": 450, "disponibilidade_sistema": "99.5%", "backups_realizados": 24}}</div>
    <div class="login-container">
        <div class="login-sidebar">
            <div>
                <h1 style="font-size: 2.5rem; margin-bottom: 20px; color: var(--green); font-weight: 800;">VidaPlus</h1>
                <p style="font-size: 1.1rem; color: var(--text-dark); line-height: 1.8; font-weight: 500;">Sistema Integrado de Gest√£o Hospitalar com Telemedicina</p>
            </div>
            <div>
                <p style="color: var(--text-dark); font-size: 0.95rem; margin-bottom: 12px; font-weight: 600;">‚úì Agendamento Inteligente de Consultas</p>
                <p style="color: var(--text-dark); font-size: 0.95rem; margin-bottom: 12px; font-weight: 600;">‚úì Telemedicina de Alta Qualidade</p>
                <p style="color: var(--text-dark); font-size: 0.95rem; font-weight: 600;">‚úì Prontu√°rio Eletr√¥nico Seguro</p>
            </div>
        </div>
        <div class="login-main">
            <h2 style="margin-bottom: 8px; font-size: 1.8rem;">Bem-vindo</h2>
            <p style="color: var(--muted); margin-bottom: 30px; font-size: 0.95rem;">Selecione seu tipo de usu√°rio e fa√ßa login</p>
            
            <div id="profile-selection">
                <h4 style="margin-bottom: 15px; font-size: 0.9rem; font-weight: 700; text-transform: uppercase; color: var(--muted);">Tipo de Usu√°rio</h4>
                
                <div id="card-patient" class="profile-card selected" onclick="selectProfile('patient')">
                    <div style="background: var(--green); color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; margin-right: 15px; font-weight: bold;">P</div>
                    <div>
                        <h4>Paciente</h4>
                        <p>Acesse suas consultas e prontu√°rio</p>
                    </div>
                </div>
                
                <div id="card-professional" class="profile-card" onclick="selectProfile('professional')">
                    <div style="background: var(--blue); color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; margin-right: 15px; font-weight: bold;">M</div>
                    <div>
                        <h4>Profissional</h4>
                        <p>Gerencie sua agenda e pacientes</p>
                    </div>
                </div>
                
                <div id="card-admin" class="profile-card" onclick="selectProfile('admin')">
                    <div style="background: var(--purple); color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; margin-right: 15px; font-weight: bold;">A</div>
                    <div>
                        <h4>Administrador</h4>
                        <p>Controle total do sistema</p>
                    </div>
                </div>
            </div>
            
            <div style="margin-top: 30px;">
                <label>E-mail</label>
                <input id="loginEmail" type="email" placeholder="seu@email.com" />
            </div>
            
            <div>
                <label>Senha</label>
                <input id="loginPass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
            </div>
            
            <button type="button" class="btn-login-final" onclick="login()">Entrar no Sistema</button>
            <div id="msgLogin" style="margin-top: 15px; color: var(--red-danger); text-align: center; font-weight: 600;"></div>
            
            <div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee;">
                <a href="#" onclick="openCreateAccountModal(); return false;" style="color: var(--green); text-decoration: none; font-weight: 700; margin-right: 20px;">Criar Conta</a>
                <a href="#" onclick="openForgotPasswordModal(); return false;" style="color: var(--muted); text-decoration: none; font-weight: 700;">Esqueci a Senha</a>
            </div>
        </div>
    </div>
</div>

<!-- Dashboard -->
<div id="app-container" class="dashboard-layout" style="display: none;">
    <aside class="sidebar">
        <div class="sidebar-header">
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <div style="background: linear-gradient(135deg, var(--green) 0%, #06a76d 100%); color: white; width: 45px; height: 45px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.2rem;">V+</div>
                <span style="margin-left: 12px; font-weight: 800; font-size: 1.1rem;">VidaPlus</span>
            </div>
            <div id="sidebar-current-user" class="sidebar-user">Usu√°rio</div>
            <div id="sidebar-current-profile" style="font-size: 0.85rem; color: var(--muted);">Perfil: Paciente</div>
        </div>
        <nav id="sidebar-menu-links" class="sidebar-menu"></nav>
    </aside>
    
    <main class="main-content">
        <!-- Dashboard Page - Paciente -->
        <div id="homePage" class="page active">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                <div>
                    <h2 style="font-size: 2rem; margin-bottom: 10px;">Dashboard</h2>
                    <p id="welcome-message" style="color: var(--muted);">Bem-vindo ao VidaPlus!</p>
                </div>
                <button class="btnPrimary" onclick="openAgendarModal()" style="padding: 12px 24px; font-size: 1rem;">+ Agendar Consulta</button>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card"><h3>Peso</h3><p id="stat-peso">75.5 kg</p></div>
                <div class="stat-card"><h3>Altura</h3><p id="stat-altura">1.65 m</p></div>
                <div class="stat-card"><h3>Pr√≥xima Consulta</h3><p id="stat-dias-proxima">2 dias</p></div>
                <div class="stat-card"><h3>Press√£o Arterial</h3><p id="stat-pressao">130/85</p></div>
            </div>
            
            <div class="info-box">
                <h4>Sua Pr√≥xima Consulta</h4>
                <p id="proxima-consulta-info">Cardiologia com Dr. Carlos Mendes em 05/12/2025 √†s 10:00</p>
            </div>
            
            <h3 style="margin-top: 40px; margin-bottom: 20px;">Dicas e Orienta√ß√µes M√©dicas</h3>
            <div id="dicas-container"></div>
        </div>
        
        <!-- Minhas Consultas (Paciente) -->
        <div id="listaPage" class="page">
            <h2 style="font-size: 2rem; margin-bottom: 10px;">Minhas Consultas</h2>
            <p style="color: var(--muted); margin-bottom: 30px;">Visualize e gerencie suas consultas</p>
            <div class="card">
                <div id="consultasCardList"></div>
            </div>
            <button class="btnPrimary" style="margin-top: 20px;" onclick="openAgendarModal()">+ Agendar Nova Consulta</button>
        </div>
        
        <!-- Agendar Consulta Modal -->
        <div id="agendarModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeAgendarModal()">&times;</span>
                <h3 style="margin-bottom: 20px;">Agendar Nova Consulta</h3>
                <label>Especialidade</label>
                <select id="consultaEspecialidade">
                    <option value="">Selecione</option>
                    <option>Cardiologia</option>
                    <option>Pediatria</option>
                    <option>Dermatologia</option>
                </select>
                <label>M√©dico</label>
                <select id="consultaMedico">
                    <option value="">Selecione</option>
                    <option>Dr. Carlos Mendes</option>
                    <option>Dra. Diana Souza</option>
                </select>
                <label>Data</label>
                <input id="consultaData" type="date" />
                <label>Hora</label>
                <input id="consultaHora" type="time" />
                <label>Tipo</label>
                <select id="consultaTipo">
                    <option value="video">V√≠deo Chamada</option>
                    <option value="presencial">Presencial</option>
                </select>
                <label>Motivo da Consulta</label>
                <textarea id="consultaMotivo" placeholder="Descreva brevemente o motivo da sua consulta" style="height: 80px;"></textarea>
                <button class="btnPrimary" onclick="salvarConsulta()" style="width: 100%; margin-top: 20px;">Agendar Consulta</button>
            </div>
        </div>
        
        <!-- Prontu√°rio -->
        <div id="prontuarioPage" class="page">
            <h2 style="font-size: 2rem; margin-bottom: 10px;">Meu Prontu√°rio</h2>
            <p style="color: var(--muted); margin-bottom: 30px;">Informa√ß√µes m√©dicas pessoais</p>
            <div class="card" id="prontuarioContent"></div>
        </div>
        
        <!-- Consultas por V√≠deo -->
        <div id="videoPage" class="page">
            <h2 style="font-size: 2rem; margin-bottom: 10px;">Consultas por V√≠deo</h2>
            <p style="color: var(--muted); margin-bottom: 30px;">Suas consultas online agendadas</p>
            <div class="card">
                <div id="videoConsultasContent"></div>
            </div>
        </div>
        
        <!-- Modal de V√≠deo Chamada -->
        <div id="videoModal" class="modal">
            <div class="modal-content" style="max-width: 700px;">
                <span class="close" onclick="document.getElementById('videoModal').classList.remove('show')">&times;</span>
                <div id="videoModalContent"></div>
            </div>
        </div>
        
        <!-- Agenda (Profissional/Admin) -->
        <div id="agendaPage" class="page">
            <h2 style="font-size: 2rem; margin-bottom: 10px;">Agenda de Consultas</h2>
            <p style="color: var(--muted); margin-bottom: 30px;">Visualize todas as consultas</p>
            <div class="card">
                <div class="table-responsive">
                    <table id="agendaTable">
                        <thead>
                            <tr>
                                <th>Paciente</th>
                                <th>M√©dico</th>
                                <th>Especialidade</th>
                                <th>Data</th>
                                <th>Hora</th>
                                <th>Modalidade</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="agendaTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Prontu√°rios dos Pacientes (M√©dico) -->
        <div id="prontuariosPage" class="page">
            <h2 style="font-size: 2rem; margin-bottom: 10px;">Prontu√°rios dos Pacientes</h2>
            <p style="color: var(--muted); margin-bottom: 30px;">Clique em um paciente para ver detalhes completos</p>
            <div id="prontuariosContent"></div>
            <div id="pacienteDetalhesModal" class="modal">
                <div class="modal-content" style="max-width: 600px;">
                    <span class="close" onclick="document.getElementById('pacienteDetalhesModal').classList.remove('show')">&times;</span>
                    <div id="pacienteDetalhesContent"></div>
                </div>
            </div>
        </div>
        
        <!-- Prescri√ß√µes (Profissional) -->
        <div id="prescricoesPage" class="page">
            <h2 style="font-size: 2rem; margin-bottom: 10px;">Prescri√ß√µes Digitais</h2>
            <p style="color: var(--muted); margin-bottom: 30px;">Gerencie as prescri√ß√µes dos pacientes</p>
            <div class="card">
                <h3 style="margin-bottom: 20px;">Emitir Nova Prescri√ß√£o</h3>
                <label>Paciente</label>
                <select id="prescricaoPaciente">
                    <option value="">Selecione um paciente</option>
                </select>
                <label>Medicamento</label>
                <input id="prescricaoMedicamento" type="text" placeholder="Nome do medicamento" />
                <label>Dosagem</label>
                <input id="prescricaoDosagem" type="text" placeholder="Ex: 1 comprimido ao dia" />
                <label>Dura√ß√£o do Tratamento</label>
                <input id="prescricaoDuracao" type="text" placeholder="Ex: 30 dias" />
                <button class="btnPrimary" onclick="salvarPrescricao()" style="width: 100%; margin-top: 20px;">Emitir Prescri√ß√£o</button>
            </div>
            
            <h3 style="margin-top: 40px; margin-bottom: 20px;">Prescri√ß√µes Recentes</h3>
            <div id="prescricoesListContent"></div>
        </div>
        
        <!-- Leitos (Admin) -->
        <div id="leitosPage" class="page">
            <h2 style="font-size: 2rem; margin-bottom: 10px;">Controle de Leitos</h2>
            <p style="color: var(--muted); margin-bottom: 30px;">Gerencie a disponibilidade de leitos hospitalares</p>
            <div class="card">
                <div id="leitosContent"></div>
            </div>
        </div>
        
        <!-- Relat√≥rios Financeiros (Admin) -->
        <div id="relatoriosPage" class="page">
            <h2 style="font-size: 2rem; margin-bottom: 10px;">Relat√≥rios e M√©tricas</h2>
            <p style="color: var(--muted); margin-bottom: 30px;">Informa√ß√µes financeiras e de desempenho do sistema</p>
            <div class="card">
                <div id="relatoriosContent"></div>
            </div>
        </div>
        
        <!-- Seguran√ßa e Compliance (Admin) -->
        <div id="segurancaPage" class="page">
            <h2 style="font-size: 2rem; margin-bottom: 10px;">Seguran√ßa e Compliance (LGPD)</h2>
            <p style="color: var(--muted); margin-bottom: 30px;">Controle de acesso, logs de auditoria e conformidade</p>
            <div class="card">
                <h3 style="margin-bottom: 20px;">Registros de Auditoria</h3>
                <div id="auditLogContent"></div>
            </div>
            
            <div class="card">
                <h3 style="margin-bottom: 20px;">Controle de Acesso (RBAC)</h3>
                <div id="rbacContent"></div>
            </div>
        </div>
        
        <!-- Gest√£o de Usu√°rios (Admin) -->
        <div id="cadastroPage" class="page">
            <h2 style="font-size: 2rem; margin-bottom: 10px;">Gest√£o de Usu√°rios e TI</h2>
            <p style="color: var(--muted); margin-bottom: 30px;">Controle total do sistema</p>
            
            <div class="card">
                <h3 style="margin-bottom: 20px;">Editar Informa√ß√µes do M√©dico</h3>
                <label>Nome do M√©dico</label>
                <input id="medicName" type="text" placeholder="Nome do m√©dico" />
                <label>Especialidade</label>
                <input id="medicSpecialty" type="text" placeholder="Especialidade" />
                <label>CRM</label>
                <input id="medicCRM" type="text" placeholder="N√∫mero do CRM" />
                <button class="btnPrimary" onclick="salvarMedico()">Salvar M√©dico</button>
            </div>
            
            <div class="card">
                <h3 style="margin-bottom: 20px;">Gest√£o de Capas</h3>
                <label>URL da Capa</label>
                <input id="capaURL" type="text" placeholder="https://exemplo.com/capa.jpg" />
                <button class="btnPrimary" onclick="salvarCapa()">Atualizar Capa</button>
            </div>
            
            <div class="card">
                <h3 style="margin-bottom: 20px;">M√©tricas de TI e Disponibilidade</h3>
                <div id="tarefasAdmin"></div>
            </div>
        </div>
    </main>
</div>

<script>
const LS_C = 'vidaplus_consultas';
const LS_P = 'vidaplus_pacientes';
let userProfile = 'patient';
let currentUser = null;
let currentPatientId = null;

// Carregar dados fake
const fakeData = JSON.parse(document.getElementById('fakeData').textContent);

function selectProfile(profile) {
    userProfile = profile;
    document.querySelectorAll('.profile-card').forEach(card => card.classList.remove('selected'));
    document.getElementById('card-' + profile).classList.add('selected');
    
    const emailInput = document.getElementById('loginEmail');
    if (profile === 'professional') {
        emailInput.placeholder = 'medico@vidaplus.com.br';
    } else if (profile === 'admin') {
        emailInput.placeholder = 'admin@vidaplus.com.br';
    } else {
        emailInput.placeholder = 'seu@email.com';
    }
    document.getElementById('loginEmail').value = '';
    document.getElementById('loginPass').value = '';
    document.getElementById('msgLogin').textContent = '';
}

function login() {
    const loginEmail = document.getElementById('loginEmail').value;
    const loginPass = document.getElementById('loginPass').value;
    const msgLogin = document.getElementById('msgLogin');
    
    msgLogin.textContent = '';
    
    if (!loginEmail || !loginPass) {
        msgLogin.textContent = 'Preencha o e-mail e a senha para entrar.';
        return;
    }
    
    if (!loginEmail.includes('@')) {
        msgLogin.textContent = 'E-mail inv√°lido. Use um e-mail com @';
        return;
    }
    
    // Definir paciente atual se for paciente
    if (userProfile === 'patient') {
        currentPatientId = 1; // Simular que o paciente logado √© o ID 1
    }
    
    // Login aceito
    currentUser = { email: loginEmail, profile: userProfile };
    
    const profileText = userProfile.charAt(0).toUpperCase() + userProfile.slice(1);
    document.getElementById('sidebar-current-user').textContent = loginEmail;
    document.getElementById('sidebar-current-profile').textContent = 'Perfil: ' + profileText;
    document.getElementById('welcome-message').textContent = 'Bem-vindo(a)! Voc√™ est√° logado como ' + profileText + '.';
    
    updateMenuByProfile();
    loadDashboard();
    
    document.getElementById('login-screen-wrapper').style.display = 'none';
    document.getElementById('app-container').style.display = 'flex';
    
    showPage('homePage');
}

function updateMenuByProfile() {
    const menuContainer = document.getElementById('sidebar-menu-links');
    menuContainer.innerHTML = '';
    
    if (userProfile === 'patient') {
        menuContainer.innerHTML = `
            <a onclick="showPage('homePage')">üìä Dashboard</a>
            <a onclick="showPage('listaPage')">üìÖ Minhas Consultas</a>
            <a onclick="showPage('prontuarioPage')">üìã Meu Prontu√°rio</a>
            <a onclick="showPage('videoPage')">üìπ Consultas por V√≠deo</a>
            <a onclick="logout()">üö™ Sair</a>
        `;
    } else if (userProfile === 'professional') {
        menuContainer.innerHTML = `
            <a onclick="showPage('homePage')">üìä Dashboard</a>
            <a onclick="showPage('agendaPage')">üìÖ Minha Agenda</a>
            <a onclick="showPage('prontuariosPage')">üìã Prontu√°rios</a>
            <a onclick="showPage('prescricoesPage')">üíä Prescri√ß√µes</a>
            <a onclick="showPage('relatoriosPage')">üìä Relat√≥rios</a>
            <a onclick="logout()">üö™ Sair</a>
        `;
    } else if (userProfile === 'admin') {
        menuContainer.innerHTML = `
            <a onclick="showPage('homePage')">üìä Dashboard</a>
            <a onclick="showPage('agendaPage')">üìÖ Agenda Geral</a>
            <a onclick="showPage('leitosPage')">üõèÔ∏è Leitos</a>
            <a onclick="showPage('relatoriosPage')">üí∞ Relat√≥rios Financeiros</a>
            <a onclick="showPage('segurancaPage')">üîí Seguran√ßa e Compliance</a>
            <a onclick="showPage('cadastroPage')">‚öôÔ∏è Gest√£o de TI</a>
            <a onclick="logout()">üö™ Sair</a>
        `;
    }
}

function logout() {
    if (confirm('Tem certeza que deseja sair?')) {
        document.getElementById('app-container').style.display = 'none';
        document.getElementById('login-screen-wrapper').style.display = 'block';
        document.getElementById('loginEmail').value = '';
        document.getElementById('loginPass').value = '';
        selectProfile('patient');
        currentUser = null;
        currentPatientId = null;
    }
}

function showPage(id) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    const page = document.getElementById(id);
    if (page) {
        page.classList.add('active');
        
        if (id === 'listaPage') {
            renderConsultas();
        } else if (id === 'agendaPage') {
            renderAgenda();
        } else if (id === 'prontuarioPage') {
            renderProntuario();
        } else if (id === 'prontuariosPage') {
            renderProntuarios();
        } else if (id === 'videoPage') {
            renderVideoConsultas();
        } else if (id === 'prescricoesPage') {
            renderPrescricoes();
        } else if (id === 'leitosPage') {
            renderLeitos();
        } else if (id === 'relatoriosPage') {
            renderRelatorios();
        } else if (id === 'segurancaPage') {
            renderSeguranca();
        } else if (id === 'cadastroPage') {
            renderCadastro();
        } else if (id === 'homePage') {
            loadDashboard();
        }
    }
}

function loadDashboard() {
    if (userProfile === 'patient') {
        const paciente = fakeData.pacientes.find(p => p.id === currentPatientId);
        const consultas = fakeData.consultas.filter(c => c.paciente_id === currentPatientId && c.status === 'Agendada');
        
        // Atualizar estat√≠sticas do paciente
        document.getElementById('stat-peso').textContent = paciente.sinais_vitais.peso + ' kg';
        document.getElementById('stat-altura').textContent = paciente.sinais_vitais.altura + ' m';
        document.getElementById('stat-pressao').textContent = paciente.sinais_vitais.pressao;
        
        // Calcular dias para pr√≥xima consulta
        if (consultas.length > 0) {
            const proximaConsulta = consultas[0];
            const dataConsulta = new Date(proximaConsulta.data);
            const hoje = new Date();
            const diasFaltam = Math.ceil((dataConsulta - hoje) / (1000 * 60 * 60 * 24));
            document.getElementById('stat-dias-proxima').textContent = diasFaltam + ' dias';
            
            const medico = fakeData.medicos.find(m => m.id === proximaConsulta.medico_id);
            document.getElementById('proxima-consulta-info').textContent = `${proximaConsulta.tipo} com ${medico.nome} em ${proximaConsulta.data} √†s ${proximaConsulta.hora}`;
        }
        
        // Carregar dicas de rem√©dios e orienta√ß√µes
        renderDicas();
    } else if (userProfile === 'professional') {
        const stats = `
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                <div class="stat-card"><h3>Pacientes Atendidos</h3><p>${fakeData.consultas.length}</p></div>
                <div class="stat-card"><h3>Consultas Hoje</h3><p>3</p></div>
                <div class="stat-card"><h3>Prescri√ß√µes Pendentes</h3><p>${fakeData.prescricoes.length}</p></div>
            </div>
        `;
        document.querySelector('#homePage .stats-grid').innerHTML = stats;
    } else if (userProfile === 'admin') {
        const stats = `
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                <div class="stat-card"><h3>Pacientes Cadastrados</h3><p>${fakeData.pacientes.length}</p></div>
                <div class="stat-card"><h3>Profissionais</h3><p>${fakeData.medicos.length}</p></div>
                <div class="stat-card"><h3>Leitos Dispon√≠veis</h3><p>${fakeData.leitos.filter(l => l.status === 'Dispon√≠vel').length}</p></div>
                <div class="stat-card"><h3>Disponibilidade do Sistema</h3><p>${fakeData.admin_metrics.disponibilidade_sistema}</p></div>
            </div>
        `;
        document.querySelector('#homePage .stats-grid').innerHTML = stats;
    }
}

function renderDicas() {
    const container = document.getElementById('dicas-container');
    const dicas = [
        { titulo: 'Medicamentos', descricao: 'Tome seus medicamentos sempre no mesmo hor√°rio para melhor efic√°cia. N√£o interrompa o tratamento sem orienta√ß√£o m√©dica.' },
        { titulo: 'Alimenta√ß√£o', descricao: 'Mantenha uma dieta equilibrada com frutas, vegetais e prote√≠nas. Reduza o consumo de sal e a√ß√∫car.' },
        { titulo: 'Exerc√≠cio F√≠sico', descricao: 'Pratique atividades f√≠sicas regularmente. Caminhe pelo menos 30 minutos por dia, 5 dias por semana.' },
        { titulo: 'Hidrata√ß√£o', descricao: 'Beba pelo menos 2 litros de √°gua por dia. Evite bebidas a√ßucaradas e alco√≥licas.' },
        { titulo: 'Sono', descricao: 'Durma de 7 a 8 horas por noite. Mantenha uma rotina regular de sono.' }
    ];
    
    container.innerHTML = '';
    dicas.forEach(dica => {
        container.innerHTML += `
            <div class="dica-card">
                <h5>${dica.titulo}</h5>
                <p>${dica.descricao}</p>
            </div>
        `;
    });
}

function renderConsultas() {
    const container = document.getElementById('consultasCardList');
    const consultas = fakeData.consultas;
    
    container.innerHTML = '';
    if (consultas.length === 0) {
        container.innerHTML = '<p style="color: var(--muted);">Nenhuma consulta agendada.</p>';
        return;
    }
    
    consultas.forEach(c => {
        const paciente = fakeData.pacientes.find(p => p.id === c.paciente_id);
        const medico = fakeData.medicos.find(m => m.id === c.medico_id);
        const modalidadeBadge = c.modalidade === 'video' ? '<span class="badge badge-video">V√≠deo Chamada</span>' : '<span class="badge badge-presencial">Presencial</span>';
        container.innerHTML += `
            <div class="consulta-card">
                <h4>${c.tipo}</h4>
                <div class="consulta-info"><strong>M√©dico:</strong> ${medico.nome}</div>
                <div class="consulta-info"><strong>Data:</strong> ${c.data} √†s ${c.hora}</div>
                <div class="consulta-info"><strong>Status:</strong> ${c.status}</div>
                ${modalidadeBadge}
                ${c.modalidade === 'video' ? '<button class="btnPrimary" style="margin-top: 15px; width: 100%;" onclick="iniciarVideoChamada()">üìπ Iniciar V√≠deo Chamada</button>' : ''}
            </div>
        `;
    });
}

function renderAgenda() {
    const tbody = document.getElementById('agendaTableBody');
    tbody.innerHTML = '';
    
    fakeData.consultas.forEach(c => {
        const paciente = fakeData.pacientes.find(p => p.id === c.paciente_id);
        const medico = fakeData.medicos.find(m => m.id === c.medico_id);
        tbody.innerHTML += `
            <tr>
                <td>${paciente.nome}</td>
                <td>${medico.nome}</td>
                <td>${c.tipo}</td>
                <td>${c.data}</td>
                <td>${c.hora}</td>
                <td><span class="badge ${c.modalidade === 'video' ? 'badge-video' : 'badge-presencial'}">${c.modalidade === 'video' ? 'V√≠deo' : 'Presencial'}</span></td>
                <td>${c.status}</td>
            </tr>
        `;
    });
}

function renderProntuario() {
    const container = document.getElementById('prontuarioContent');
    const paciente = fakeData.pacientes.find(p => p.id === currentPatientId);
    
    if (!paciente) {
        container.innerHTML = '<p style="color: var(--muted);">Dados do paciente n√£o encontrados.</p>';
        return;
    }
    
    const idadeAtual = new Date().getFullYear() - new Date(paciente.data_nasc).getFullYear();
    
    container.innerHTML = `
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
            <div>
                <h4 style="color: var(--muted); font-size: 0.85rem; text-transform: uppercase; margin-bottom: 8px;">Nome</h4>
                <p style="font-weight: 700; font-size: 1.1rem;">${paciente.nome}</p>
            </div>
            <div>
                <h4 style="color: var(--muted); font-size: 0.85rem; text-transform: uppercase; margin-bottom: 8px;">CPF</h4>
                <p style="font-weight: 700; font-size: 1.1rem;">${paciente.cpf}</p>
            </div>
            <div>
                <h4 style="color: var(--muted); font-size: 0.85rem; text-transform: uppercase; margin-bottom: 8px;">Data de Nascimento</h4>
                <p style="font-weight: 700; font-size: 1.1rem;">${paciente.data_nasc} (${idadeAtual} anos)</p>
            </div>
            <div>
                <h4 style="color: var(--muted); font-size: 0.85rem; text-transform: uppercase; margin-bottom: 8px;">E-mail</h4>
                <p style="font-weight: 700; font-size: 1.1rem;">${paciente.email}</p>
            </div>
        </div>
        
        <hr style="border: none; border-top: 2px solid #eee; margin: 30px 0;">
        
        <h3 style="margin-top: 20px; margin-bottom: 15px;">Hist√≥rico M√©dico</h3>
        <p style="color: var(--muted); line-height: 1.6;">${paciente.historico_medico}</p>
        
        <h3 style="margin-top: 30px; margin-bottom: 15px;">Doen√ßas Cr√¥nicas</h3>
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
            ${paciente.doencas_cronicas.map(d => `<span class="badge" style="background: #fef3c7; color: #d97706;">${d}</span>`).join('')}
        </div>
        
        <h3 style="margin-top: 30px; margin-bottom: 15px;">Medicamentos em Uso</h3>
        <ul style="margin-left: 20px;">
            ${paciente.medicamentos_uso.map(m => `<li style="margin-bottom: 8px; color: var(--muted);">${m}</li>`).join('')}
        </ul>
        
        <h3 style="margin-top: 30px; margin-bottom: 15px;">Sinais Vitais</h3>
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
            <div style="background: #f0f9ff; padding: 15px; border-radius: 8px;">
                <p style="color: var(--muted); font-size: 0.85rem; margin-bottom: 5px;">Peso</p>
                <p style="font-weight: 700; font-size: 1.2rem;">${paciente.sinais_vitais.peso} kg</p>
            </div>
            <div style="background: #f0f9ff; padding: 15px; border-radius: 8px;">
                <p style="color: var(--muted); font-size: 0.85rem; margin-bottom: 5px;">Altura</p>
                <p style="font-weight: 700; font-size: 1.2rem;">${paciente.sinais_vitais.altura} m</p>
            </div>
            <div style="background: #f0f9ff; padding: 15px; border-radius: 8px;">
                <p style="color: var(--muted); font-size: 0.85rem; margin-bottom: 5px;">Press√£o Arterial</p>
                <p style="font-weight: 700; font-size: 1.2rem;">${paciente.sinais_vitais.pressao}</p>
            </div>
            <div style="background: #f0f9ff; padding: 15px; border-radius: 8px;">
                <p style="color: var(--muted); font-size: 0.85rem; margin-bottom: 5px;">Frequ√™ncia Card√≠aca</p>
                <p style="font-weight: 700; font-size: 1.2rem;">${paciente.sinais_vitais.frequencia_cardiaca}</p>
            </div>
        </div>
        
        <h3 style="margin-top: 30px; margin-bottom: 15px;">Sintomas Atuais</h3>
        <p style="color: var(--muted); line-height: 1.6;">${paciente.sintomas_atuais}</p>
    `;
}

function renderProntuarios() {
    const container = document.getElementById('prontuariosContent');
    container.innerHTML = '';
    
    fakeData.pacientes.forEach(p => {
        container.innerHTML += `
            <div class="paciente-card" onclick="mostrarDetalhePaciente(${p.id})">
                <h4>${p.nome}</h4>
                <p><strong>CPF:</strong> ${p.cpf}</p>
                <p><strong>Doen√ßa:</strong> ${p.doencas_cronicas.join(', ')}</p>
                <p style="color: var(--green); font-weight: 700; margin-top: 10px;">Clique para ver detalhes completos ‚Üí</p>
            </div>
        `;
    });
}

function mostrarDetalhePaciente(pacienteId) {
    const paciente = fakeData.pacientes.find(p => p.id === pacienteId);
    const idadeAtual = new Date().getFullYear() - new Date(paciente.data_nasc).getFullYear();
    
    const container = document.getElementById('pacienteDetalhesContent');
    container.innerHTML = `
        <h3>${paciente.nome}</h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px;">
            <div>
                <p style="color: var(--muted); font-size: 0.85rem;"><strong>CPF</strong></p>
                <p>${paciente.cpf}</p>
            </div>
            <div>
                <p style="color: var(--muted); font-size: 0.85rem;"><strong>Idade</strong></p>
                <p>${idadeAtual} anos</p>
            </div>
            <div>
                <p style="color: var(--muted); font-size: 0.85rem;"><strong>Peso</strong></p>
                <p>${paciente.sinais_vitais.peso} kg</p>
            </div>
            <div>
                <p style="color: var(--muted); font-size: 0.85rem;"><strong>Altura</strong></p>
                <p>${paciente.sinais_vitais.altura} m</p>
            </div>
            <div>
                <p style="color: var(--muted); font-size: 0.85rem;"><strong>Frequ√™ncia Card√≠aca</strong></p>
                <p>${paciente.sinais_vitais.frequencia_cardiaca}</p>
            </div>
            <div>
                <p style="color: var(--muted); font-size: 0.85rem;"><strong>Press√£o Arterial</strong></p>
                <p>${paciente.sinais_vitais.pressao}</p>
            </div>
        </div>
        <hr style="border: none; border-top: 1px solid #eee; margin: 20px 0;">
        <h4 style="margin-top: 20px;">Doen√ßas Cr√¥nicas</h4>
        <p>${paciente.doencas_cronicas.join(', ')}</p>
        <h4 style="margin-top: 20px;">Medicamentos</h4>
        <p>${paciente.medicamentos_uso.join(', ')}</p>
        <h4 style="margin-top: 20px;">Sintomas Atuais</h4>
        <p>${paciente.sintomas_atuais}</p>
    `;
    
    document.getElementById('pacienteDetalhesModal').classList.add('show');
}

function renderVideoConsultas() {
    const container = document.getElementById('videoConsultasContent');
    const consultas = fakeData.consultas.filter(c => c.status === 'Agendada' && c.modalidade === 'video');
    
    if (consultas.length === 0) {
        container.innerHTML = '<p style="color: var(--muted);">Nenhuma consulta por v√≠deo agendada.</p>';
        return;
    }
    
    container.innerHTML = '';
    consultas.forEach(c => {
        const medico = fakeData.medicos.find(m => m.id === c.medico_id);
        container.innerHTML += `
            <div class="consulta-card">
                <h4>${c.tipo}</h4>
                <div class="consulta-info"><strong>M√©dico:</strong> ${medico.nome}</div>
                <div class="consulta-info"><strong>Data:</strong> ${c.data} √†s ${c.hora}</div>
                <button class="btnPrimary" style="margin-top: 15px; width: 100%;" onclick="iniciarVideoChamada()">üìπ Iniciar V√≠deo Chamada</button>
            </div>
        `;
    });
}

function renderPrescricoes() {
    // Preencher select de pacientes
    const selectPaciente = document.getElementById('prescricaoPaciente');
    selectPaciente.innerHTML = '<option value="">Selecione um paciente</option>';
    fakeData.pacientes.forEach(p => {
        selectPaciente.innerHTML += `<option value="${p.id}">${p.nome}</option>`;
    });
    
    // Renderizar prescri√ß√µes recentes
    const container = document.getElementById('prescricoesListContent');
    container.innerHTML = '';
    
    fakeData.prescricoes.forEach(p => {
        const paciente = fakeData.pacientes.find(pac => pac.id === p.paciente_id);
        const medico = fakeData.medicos.find(m => m.id === p.medico_id);
        container.innerHTML += `
            <div class="prescricao-card">
                <h5>${p.medicamento}</h5>
                <p><strong>Paciente:</strong> ${paciente.nome}</p>
                <p><strong>Dosagem:</strong> ${p.dosagem}</p>
                <p><strong>Dura√ß√£o:</strong> ${p.duracao}</p>
                <p><strong>Data de Emiss√£o:</strong> ${p.data}</p>
            </div>
        `;
    });
}

function renderLeitos() {
    const container = document.getElementById('leitosContent');
    container.innerHTML = '';
    
    fakeData.leitos.forEach(leito => {
        const statusBadge = leito.status === 'Dispon√≠vel' ? '<span class="badge badge-success">Dispon√≠vel</span>' : '<span class="badge badge-warning">Ocupado</span>';
        container.innerHTML += `
            <div class="leito-card">
                <h5>Leito ${leito.numero} - Andar ${leito.andar}</h5>
                <p><strong>Status:</strong> ${statusBadge}</p>
                ${leito.paciente ? `<p><strong>Paciente:</strong> ${leito.paciente}</p>` : ''}
                ${leito.data_internacao ? `<p><strong>Data de Interna√ß√£o:</strong> ${leito.data_internacao}</p>` : ''}
            </div>
        `;
    });
}

function renderRelatorios() {
    const container = document.getElementById('relatoriosContent');
    
    if (userProfile === 'admin') {
        container.innerHTML = `
            <h3 style="margin-bottom: 20px;">Relat√≥rios Financeiros e de Desempenho</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                <div class="admin-metric">
                    <h4>Receita Mensal</h4>
                    <p>R$ 125.450</p>
                </div>
                <div class="admin-metric">
                    <h4>Despesas Operacionais</h4>
                    <p>R$ 85.320</p>
                </div>
                <div class="admin-metric">
                    <h4>Lucro L√≠quido</h4>
                    <p>R$ 40.130</p>
                </div>
                <div class="admin-metric">
                    <h4>Taxa de Ocupa√ß√£o</h4>
                    <p>75%</p>
                </div>
                <div class="admin-metric">
                    <h4>Pacientes Atendidos</h4>
                    <p>${fakeData.pacientes.length}</p>
                </div>
                <div class="admin-metric">
                    <h4>Consultas Realizadas</h4>
                    <p>${fakeData.consultas.length}</p>
                </div>
            </div>
        `;
    } else {
        container.innerHTML = '<h3 style="margin-bottom: 20px;">Relat√≥rios de Pacientes</h3>';
        fakeData.pacientes.forEach((p, i) => {
            container.innerHTML += `
                <div style="margin-top: 15px; padding: 15px; background: #f9f9f9; border-radius: 10px;">
                    <h4>Paciente ${i + 1}: ${p.nome}</h4>
                    <p><strong>CPF:</strong> ${p.cpf}</p>
                    <p><strong>E-mail:</strong> ${p.email}</p>
                    <p><strong>Doen√ßas:</strong> ${p.doencas_cronicas.join(', ')}</p>
                    <p><strong>Status:</strong> Ativo</p>
                </div>
            `;
        });
    }
}

function renderSeguranca() {
    // Audit Log
    const auditContainer = document.getElementById('auditLogContent');
    auditContainer.innerHTML = `
        <div style="max-height: 300px; overflow-y: auto;">
            <div style="padding: 10px; border-bottom: 1px solid #eee; font-size: 0.9rem;">
                <p><strong>[2025-12-03 10:30]</strong> Usu√°rio ana@paciente.com acessou prontu√°rio</p>
            </div>
            <div style="padding: 10px; border-bottom: 1px solid #eee; font-size: 0.9rem;">
                <p><strong>[2025-12-03 09:45]</strong> Usu√°rio carlos@medico.com emitiu prescri√ß√£o</p>
            </div>
            <div style="padding: 10px; border-bottom: 1px solid #eee; font-size: 0.9rem;">
                <p><strong>[2025-12-03 08:20]</strong> Usu√°rio admin@vidaplus.com.br alterou dados de leito</p>
            </div>
            <div style="padding: 10px; border-bottom: 1px solid #eee; font-size: 0.9rem;">
                <p><strong>[2025-12-02 15:10]</strong> Usu√°rio diana@medico.com realizou teleconsulta</p>
            </div>
        </div>
    `;
    
    // RBAC
    const rbacContainer = document.getElementById('rbacContent');
    rbacContainer.innerHTML = `
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div style="padding: 15px; background: var(--green-light); border-radius: 8px;">
                <h5 style="color: var(--green); margin-bottom: 10px;">Paciente</h5>
                <p style="font-size: 0.9rem; margin: 5px 0;">‚úì Visualizar pr√≥prio prontu√°rio</p>
                <p style="font-size: 0.9rem; margin: 5px 0;">‚úì Agendar consultas</p>
                <p style="font-size: 0.9rem; margin: 5px 0;">‚úì Acessar telemedicina</p>
                <p style="font-size: 0.9rem; margin: 5px 0;">‚úó Editar dados de outros</p>
            </div>
            <div style="padding: 15px; background: var(--blue-light); border-radius: 8px;">
                <h5 style="color: var(--blue); margin-bottom: 10px;">Profissional</h5>
                <p style="font-size: 0.9rem; margin: 5px 0;">‚úì Visualizar prontu√°rios</p>
                <p style="font-size: 0.9rem; margin: 5px 0;">‚úì Emitir prescri√ß√µes</p>
                <p style="font-size: 0.9rem; margin: 5px 0;">‚úì Gerenciar agenda</p>
                <p style="font-size: 0.9rem; margin: 5px 0;">‚úó Acessar dados financeiros</p>
            </div>
            <div style="padding: 15px; background: var(--purple-light); border-radius: 8px;">
                <h5 style="color: var(--purple); margin-bottom: 10px;">Administrador</h5>
                <p style="font-size: 0.9rem; margin: 5px 0;">‚úì Acesso total ao sistema</p>
                <p style="font-size: 0.9rem; margin: 5px 0;">‚úì Gerenciar usu√°rios</p>
                <p style="font-size: 0.9rem; margin: 5px 0;">‚úì Visualizar relat√≥rios</p>
                <p style="font-size: 0.9rem; margin: 5px 0;">‚úì Controlar leitos</p>
            </div>
        </div>
    `;
}

function renderCadastro() {
    const container = document.getElementById('tarefasAdmin');
    container.innerHTML = '<h3 style="margin-bottom: 20px;">M√©tricas de TI e Disponibilidade</h3>';
    
    const metricas = [
        { titulo: 'Servidores Ativos', valor: fakeData.admin_metrics.servidores_ativos, status: 'success' },
        { titulo: 'Disponibilidade do Sistema', valor: fakeData.admin_metrics.disponibilidade_sistema, status: 'success' },
        { titulo: 'Uptime M√©dio', valor: fakeData.admin_metrics.uptime_medio, status: 'success' },
        { titulo: 'Backups Realizados', valor: fakeData.admin_metrics.backups_realizados, status: 'success' },
        { titulo: 'Tickets de TI Abertos', valor: fakeData.admin_metrics.tickets_abertos, status: 'warning' },
        { titulo: 'Licen√ßas de Software', valor: fakeData.admin_metrics.licencas_software, status: 'info' }
    ];
    
    metricas.forEach(m => {
        const cor = m.status === 'success' ? 'var(--green)' : (m.status === 'warning' ? 'var(--yellow)' : 'var(--blue)');
        const bgCor = m.status === 'success' ? '#d1fae5' : (m.status === 'warning' ? '#fef3c7' : '#e0f2fe');
        container.innerHTML += `
            <div style="margin-top: 15px; padding: 15px; border-left: 5px solid ${cor}; background: ${bgCor}; border-radius: 10px;">
                <h4 style="color: ${cor};">${m.titulo}</h4>
                <p style="font-size: 1.5rem; font-weight: 700; color: ${cor}; margin-top: 8px;">${m.valor}</p>
            </div>
        `;
    });
}

function iniciarVideoChamada() {
    document.getElementById('videoModal').classList.add('show');
    document.getElementById('videoModalContent').innerHTML = `
        <div style="text-align: center;">
            <h3 style="color: var(--green); margin-bottom: 15px;">Conex√£o Estabelecida</h3>
            <p style="color: var(--muted); margin-bottom: 20px;">Simula√ß√£o de v√≠deo chamada em andamento.</p>
            <div style="width: 100%; height: 350px; background: linear-gradient(135deg, #000 0%, #1a1a1a 100%); border-radius: 12px; margin: 20px 0; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.3rem; font-weight: 700;">
                <p>üìπ V√≠deo Chamada</p>
            </div>
            <button class="btnPrimary" onclick="document.getElementById('videoModal').classList.remove('show')" style="width: 100%; margin-top: 20px;">Finalizar Chamada</button>
        </div>
    `;
}

function openAgendarModal() {
    document.getElementById('agendarModal').classList.add('show');
}

function closeAgendarModal() {
    document.getElementById('agendarModal').classList.remove('show');
}

function salvarConsulta() {
    const especialidade = document.getElementById('consultaEspecialidade').value;
    const medico = document.getElementById('consultaMedico').value;
    const data = document.getElementById('consultaData').value;
    const hora = document.getElementById('consultaHora').value;
    const tipo = document.getElementById('consultaTipo').value;
    const motivo = document.getElementById('consultaMotivo').value;
    
    if (!especialidade || !medico || !data || !hora || !motivo) {
        alert('Preencha todos os campos!');
        return;
    }
    
    alert('Consulta agendada com sucesso para ' + data + ' √†s ' + hora + '!');
    closeAgendarModal();
    document.getElementById('consultaEspecialidade').value = '';
    document.getElementById('consultaMedico').value = '';
    document.getElementById('consultaData').value = '';
    document.getElementById('consultaHora').value = '';
    document.getElementById('consultaMotivo').value = '';
}

function salvarPrescricao() {
    const paciente = document.getElementById('prescricaoPaciente').value;
    const medicamento = document.getElementById('prescricaoMedicamento').value;
    const dosagem = document.getElementById('prescricaoDosagem').value;
    const duracao = document.getElementById('prescricaoDuracao').value;
    
    if (!paciente || !medicamento || !dosagem || !duracao) {
        alert('Preencha todos os campos!');
        return;
    }
    
    alert('Prescri√ß√£o emitida com sucesso para o paciente!');
    document.getElementById('prescricaoPaciente').value = '';
    document.getElementById('prescricaoMedicamento').value = '';
    document.getElementById('prescricaoDosagem').value = '';
    document.getElementById('prescricaoDuracao').value = '';
}

function salvarMedico() {
    const nome = document.getElementById('medicName').value;
    const especialidade = document.getElementById('medicSpecialty').value;
    const crm = document.getElementById('medicCRM').value;
    
    if (!nome || !especialidade || !crm) {
        alert('Preencha todos os campos!');
        return;
    }
    
    alert('M√©dico ' + nome + ' (' + especialidade + ') salvo com sucesso!');
    document.getElementById('medicName').value = '';
    document.getElementById('medicSpecialty').value = '';
    document.getElementById('medicCRM').value = '';
}

function salvarCapa() {
    const url = document.getElementById('capaURL').value;
    
    if (!url) {
        alert('Digite a URL da capa!');
        return;
    }
    
    alert('Capa atualizada com sucesso!');
    document.getElementById('capaURL').value = '';
}

function openCreateAccountModal() {
    const modal = document.createElement('div');
    modal.className = 'modal show';
    modal.id = 'createAccountModal';
    modal.innerHTML = `
        <div class="modal-content">
            <span class="close" onclick="document.getElementById('createAccountModal').remove()">&times;</span>
            <h3 style="margin-bottom: 25px;">Criar Nova Conta</h3>
            <label>Nome Completo</label>
            <input id="createName" type="text" placeholder="Seu nome completo" />
            <label>E-mail</label>
            <input id="createEmail" type="email" placeholder="seu@email.com" />
            <label>CPF</label>
            <input id="createCPF" type="text" placeholder="000.000.000-00" />
            <label>Senha</label>
            <input id="createPassword" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
            <label>Confirmar Senha</label>
            <input id="createPasswordConfirm" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
            <label>Tipo de Usu√°rio</label>
            <select id="createUserType">
                <option value="patient">Paciente</option>
                <option value="professional">Profissional</option>
            </select>
            <button class="btnPrimary" onclick="salvarNovaConta()" style="width: 100%; margin-top: 25px;">Criar Conta</button>
        </div>
    `;
    document.body.appendChild(modal);
}

function openForgotPasswordModal() {
    const modal = document.createElement('div');
    modal.className = 'modal show';
    modal.id = 'forgotPasswordModal';
    modal.innerHTML = `
        <div class="modal-content">
            <span class="close" onclick="document.getElementById('forgotPasswordModal').remove()">&times;</span>
            <h3 style="margin-bottom: 25px;">Recuperar Senha</h3>
            <label>E-mail Cadastrado</label>
            <input id="forgotEmail" type="email" placeholder="seu@email.com" />
            <p style="font-size: 0.9rem; color: var(--muted); margin-top: 20px; line-height: 1.6;">Enviaremos um link de recupera√ß√£o para seu e-mail. Verifique sua caixa de entrada e siga as instru√ß√µes para redefinir sua senha.</p>
            <button class="btnPrimary" onclick="enviarRecuperacao()" style="width: 100%; margin-top: 25px;">Enviar Link de Recupera√ß√£o</button>
        </div>
    `;
    document.body.appendChild(modal);
}

function salvarNovaConta() {
    const nome = document.getElementById('createName').value;
    const email = document.getElementById('createEmail').value;
    const cpf = document.getElementById('createCPF').value;
    const senha = document.getElementById('createPassword').value;
    const senhaConfirm = document.getElementById('createPasswordConfirm').value;
    const tipoUsuario = document.getElementById('createUserType').value;
    
    if (!nome || !email || !cpf || !senha || !senhaConfirm) {
        alert('Preencha todos os campos!');
        return;
    }
    
    if (senha !== senhaConfirm) {
        alert('As senhas n√£o coincidem!');
        return;
    }
    
    if (senha.length < 6) {
        alert('A senha deve ter pelo menos 6 caracteres!');
        return;
    }
    
    alert('Conta criada com sucesso!\n\nNome: ' + nome + '\nE-mail: ' + email + '\nTipo: ' + (tipoUsuario === 'patient' ? 'Paciente' : 'Profissional') + '\n\nAgora voc√™ pode fazer login com suas credenciais.');
    document.getElementById('createAccountModal').remove();
}

function enviarRecuperacao() {
    const email = document.getElementById('forgotEmail').value;
    
    if (!email) {
        alert('Digite seu e-mail!');
        return;
    }
    
    if (!email.includes('@')) {
        alert('E-mail inv√°lido!');
        return;
    }
    
    alert('Link de recupera√ß√£o enviado para ' + email + '!\n\nVerifique seu e-mail e siga as instru√ß√µes para redefinir sua senha. O link expira em 24 horas.');
    document.getElementById('forgotPasswordModal').remove();
}
</script>

</body>
</html>
